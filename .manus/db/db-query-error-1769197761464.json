{
  "query": "\n-- Obtener IDs de planesSuccesion para limpiar datos vinculados\nSET @plan_ids = (SELECT GROUP_CONCAT(id) FROM planesSuccesion);\n\n-- Eliminar seguimientos de planes de acción\nDELETE FROM seguimientoPlanes \nWHERE planAccionId IN (\n  SELECT id FROM planesAccion \n  WHERE planSuccesionId IN (SELECT id FROM planesSuccesion)\n);\n\n-- Eliminar planes de acción\nDELETE FROM planesAccion \nWHERE planSuccesionId IN (SELECT id FROM planesSuccesion);\n\n-- Eliminar auditoría vinculada a planes de acción\nDELETE FROM auditoria \nWHERE planAccionId IN (SELECT id FROM planesAccion);\n\n-- Eliminar planesSuccesion\nDELETE FROM planesSuccesion;\n\n-- Verificar que está limpio\nSELECT 'planesSuccesion' as tabla, COUNT(*) as registros FROM planesSuccesion\nUNION ALL\nSELECT 'planesAccion', COUNT(*) FROM planesAccion\nUNION ALL\nSELECT 'seguimientoPlanes', COUNT(*) FROM seguimientoPlanes;\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway03.us-east-1.prod.aws.tidbcloud.com --port 4000 --user j2FTkFQTdFUnQgU.root --database TfZrNnU8ACksUNuSJSy8Lr --execute \n-- Obtener IDs de planesSuccesion para limpiar datos vinculados\nSET @plan_ids = (SELECT GROUP_CONCAT(id) FROM planesSuccesion);\n\n-- Eliminar seguimientos de planes de acción\nDELETE FROM seguimientoPlanes \nWHERE planAccionId IN (\n  SELECT id FROM planesAccion \n  WHERE planSuccesionId IN (SELECT id FROM planesSuccesion)\n);\n\n-- Eliminar planes de acción\nDELETE FROM planesAccion \nWHERE planSuccesionId IN (SELECT id FROM planesSuccesion);\n\n-- Eliminar auditoría vinculada a planes de acción\nDELETE FROM auditoria \nWHERE planAccionId IN (SELECT id FROM planesAccion);\n\n-- Eliminar planesSuccesion\nDELETE FROM planesSuccesion;\n\n-- Verificar que está limpio\nSELECT 'planesSuccesion' as tabla, COUNT(*) as registros FROM planesSuccesion\nUNION ALL\nSELECT 'planesAccion', COUNT(*) FROM planesAccion\nUNION ALL\nSELECT 'seguimientoPlanes', COUNT(*) FROM seguimientoPlanes;\n",
  "returncode": 1,
  "logs": [
    "ERROR 1146 (42S02) at line 3: Table 'tfzrnnu8acksunusjsy8lr.planesSuccesion' doesn't exist"
  ]
}